<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="title" content="Cybersecurity Innovation Coverage Calculator" />
    <meta name="description" content="Assess innovation coverage across cybersecurity domains and capabilities." />
    <meta name="author" content="Idan Pinto" />
    <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Cybersecurity Innovation Coverage Calculator</title>

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      body {
        background-color: #121212;
        color: #f1f1f1;
      }
      h1, h5, h6, label {
        color: #ffffff;
      }
      .form-control, .form-control:focus {
        background-color: #2a2a2a;
        color: #ffffff;
        border-color: #444;
      }
    </style>
  </head>

  <body>
    <main>
      <section>
        <h1>Cybersecurity Innovation Coverage Calculator</h1>
        <canvas class="riskChart" id="riskChart" height="300"></canvas>
        <div class="risk RS">
          <h4 id="scoreValue">0</h4>
        </div>
      </section>

      <div class="row">
        <section class="col-12">
          <h5 class="border-bottom">Select Capability to Evaluate Domains</h5>
          <select class="form-control" id="capabilitySelect" onchange="calculateInnovationScore()">
            <option value="0">Metadata (Configuration)</option>
            <option value="1">Events/Logs</option>
            <option value="2">Real-time Monitoring</option>
            <option value="3">Threat Detection</option>
            <option value="4">Data Enrichment</option>
          </select>
        </section>
      </div>

      <div class="row">
        <section>
          <h5 class="border-bottom">Innovation Coverage Score</h5>
          <h6 class="IS nomargin" id="innovationScore">0</h6>
        </section>
      </div>

      <section>
        <div>
          2025 Cybersecurity Innovation Coverage Calculator | Modified by Idan Pinto | Based on OWASP Risk Calculator by <a href="https://hackpuntes.com" target="_blank"><span>Javier Olmedo</span></a> | Source on <a href="https://github.com/JavierOlmedo/OWASP-Calculator" target="_blank"><span>Github</span></a>
        </div>
      </section>
    </main>

    <script src="js/jquery.min.js"></script>
    <script src="js/Chart.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
      const securityDomains = [
        "Data Security", "Identity Security", "SaaS Security", "External Attack Surface",
        "Runtime Security", "API Security", "Threat Detection", "Incident Response",
        "Security Operations", "Intelligence", "Compliance", "Code Security"
      ];

      const domainScores = [
        [1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 1, 1], // Metadata only
        [2, 2, 3, 2, 2, 2, 3, 3, 2, 2, 2, 2], // Events/Logs
        [3, 3, 4, 3, 4, 3, 4, 4, 3, 3, 3, 3], // Real-time Monitoring
        [4, 4, 4, 4, 4, 4, 5, 5, 4, 4, 4, 4], // Threat Detection
        [4, 4, 4, 4, 4, 4, 5, 5, 4, 4, 4, 4]  // Data Enrichment
      ];

      const radarCtx = document.getElementById("riskChart").getContext("2d");
      const radarChart = new Chart(radarCtx, {
        type: 'radar',
        data: {
          labels: securityDomains,
          datasets: [{
            label: "Coverage Score",
            backgroundColor: "rgba(0, 255, 100, 0.2)",
            borderColor: "rgba(0, 255, 100, 1)",
            pointBackgroundColor: "rgba(0, 255, 100, 1)",
            data: domainScores[0]
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { labels: { color: '#ffffff' } }
          },
          scales: {
            r: {
              angleLines: { color: '#444' },
              grid: { color: '#444' },
              pointLabels: { color: '#ffffff' },
              ticks: {
                beginAtZero: true,
                max: 5,
                color: '#ffffff'
              }
            }
          }
        }
      });

      function calculateInnovationScore() {
        const selectedIndex = parseInt(document.getElementById("capabilitySelect").value);
        const scores = domainScores[selectedIndex];
        radarChart.data.datasets[0].data = scores;

        const color = selectedIndex >= 3
          ? "rgba(255, 99, 132, 1)"
          : selectedIndex === 2
            ? "rgba(255, 206, 86, 1)"
            : "rgba(0, 255, 100, 1)";

        const fillColor = selectedIndex >= 3
          ? "rgba(255, 99, 132, 0.2)"
          : selectedIndex === 2
            ? "rgba(255, 206, 86, 0.2)"
            : "rgba(0, 255, 100, 0.2)";

        radarChart.data.datasets[0].borderColor = color;
        radarChart.data.datasets[0].pointBackgroundColor = color;
        radarChart.data.datasets[0].backgroundColor = fillColor;

        radarChart.update();

        const total = scores.reduce((sum, val) => sum + val, 0);
        document.getElementById("innovationScore").textContent = total;
        document.getElementById("scoreValue").textContent = total;
      }
    </script>
  </body>
</html>
